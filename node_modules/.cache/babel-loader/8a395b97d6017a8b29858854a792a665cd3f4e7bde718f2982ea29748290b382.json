{"ast":null,"code":"var _jsxFileName = \"/Users/home/Desktop/33/duck/src/Page4.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Page4 = () => {\n  _s();\n  const [prices, setPrices] = useState([]);\n  const [centerPrice, setCenterPrice] = useState(null);\n  const canvasRef = useRef(null);\n\n  // Функция для получения цены биткоина\n  const fetchBitcoinPrice = async () => {\n    try {\n      const response = await axios.get('https://api.coindesk.com/v1/bpi/currentprice/BTC.json');\n      return response.data.bpi.USD.rate_float;\n    } catch (error) {\n      console.error('Error fetching Bitcoin price:', error);\n      return centerPrice || 60000; // Возвращаем предыдущее значение цены или дефолтное\n    }\n  };\n  const getRandomDelta = () => Math.floor(Math.random() * 691) - 345;\n  const updatePrices = async () => {\n    const bitcoinPrice = await fetchBitcoinPrice();\n    const newPrice = bitcoinPrice + getRandomDelta();\n    setCenterPrice(bitcoinPrice);\n    const newPrices = [...prices, newPrice];\n    if (newPrices.length > 20) {\n      newPrices.shift();\n    }\n    setPrices(newPrices);\n  };\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updatePrices();\n    }, 5000); // Обновляем каждые 5 секунд\n\n    return () => clearInterval(interval);\n  }, [prices]);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const canvasWidth = canvas.width;\n    const canvasHeight = canvas.height;\n    const center = Math.floor(canvasHeight / 2);\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n    const drawGraph = () => {\n      let shift = 0;\n      prices.forEach((price, index) => {\n        const delta = price - centerPrice;\n        const height = Math.abs(delta);\n        const y = delta > 0 ? center - height : center;\n        ctx.fillStyle = delta > 0 ? 'green' : 'red';\n        ctx.fillRect(canvasWidth - 20 - shift, y, 20, height);\n        shift += 20;\n      });\n    };\n    drawGraph();\n  }, [prices, centerPrice]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '500px',\n      overflow: 'hidden'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: 1000,\n      height: 500,\n      style: {\n        position: 'absolute',\n        backgroundImage: 'url(/path/to/background.jpg)',\n        backgroundSize: 'cover'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(Page4, \"z0et6Hy42f6Euz/Mmxj81IlSaWc=\");\n_c = Page4;\nexport default Page4;\nvar _c;\n$RefreshReg$(_c, \"Page4\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","Page4","_s","prices","setPrices","centerPrice","setCenterPrice","canvasRef","fetchBitcoinPrice","response","get","data","bpi","USD","rate_float","error","console","getRandomDelta","Math","floor","random","updatePrices","bitcoinPrice","newPrice","newPrices","length","shift","interval","setInterval","clearInterval","canvas","current","ctx","getContext","canvasWidth","width","canvasHeight","height","center","clearRect","drawGraph","forEach","price","index","delta","abs","y","fillStyle","fillRect","style","position","overflow","children","ref","backgroundImage","backgroundSize","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/home/Desktop/33/duck/src/Page4.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nconst Page4 = () => {\n  const [prices, setPrices] = useState([]);\n  const [centerPrice, setCenterPrice] = useState(null);\n  const canvasRef = useRef(null);\n\n  // Функция для получения цены биткоина\n  const fetchBitcoinPrice = async () => {\n    try {\n      const response = await axios.get('https://api.coindesk.com/v1/bpi/currentprice/BTC.json');\n      return response.data.bpi.USD.rate_float;\n    } catch (error) {\n      console.error('Error fetching Bitcoin price:', error);\n      return centerPrice || 60000; // Возвращаем предыдущее значение цены или дефолтное\n    }\n  };\n\n  const getRandomDelta = () => Math.floor(Math.random() * 691) - 345;\n\n  const updatePrices = async () => {\n    const bitcoinPrice = await fetchBitcoinPrice();\n    const newPrice = bitcoinPrice + getRandomDelta();\n    setCenterPrice(bitcoinPrice);\n\n    const newPrices = [...prices, newPrice];\n\n    if (newPrices.length > 20) {\n      newPrices.shift();\n    }\n\n    setPrices(newPrices);\n  };\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updatePrices();\n    }, 5000); // Обновляем каждые 5 секунд\n\n    return () => clearInterval(interval);\n  }, [prices]);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const canvasWidth = canvas.width;\n    const canvasHeight = canvas.height;\n    const center = Math.floor(canvasHeight / 2);\n\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    const drawGraph = () => {\n      let shift = 0;\n      prices.forEach((price, index) => {\n        const delta = price - centerPrice;\n        const height = Math.abs(delta);\n        const y = delta > 0 ? center - height : center;\n\n        ctx.fillStyle = delta > 0 ? 'green' : 'red';\n        ctx.fillRect(canvasWidth - 20 - shift, y, 20, height);\n\n        shift += 20;\n      });\n    };\n\n    drawGraph();\n  }, [prices, centerPrice]);\n\n  return (\n    <div style={{ position: 'relative', width: '100%', height: '500px', overflow: 'hidden' }}>\n      <canvas\n        ref={canvasRef}\n        width={1000}\n        height={500}\n        style={{\n          position: 'absolute',\n          backgroundImage: 'url(/path/to/background.jpg)',\n          backgroundSize: 'cover',\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Page4;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}